<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>MICHAEL SAYS</title>
    <script src="//cdn.jsdelivr.net/phaser/2.4.3/phaser.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var _socketEnabled = true;

if (_socketEnabled) {
	var socket = io.connect('http://localhost:3000');
	  socket.on('news', function (data) {
	    console.log(data);
	  });
		socket.on('hit', function(data){
			console.log(data);
		})
}

function RGBtoHEX(r, g, b) {
	return r << 16 | g << 8 | b;
}

var game = new Phaser.Game(1280, 720, Phaser.AUTO, '', { preload: preload, create: create, update: update });
var circles;
var text;

function preload() {
  game.load.image('circle', 'assets/circle.png');
}

function create() {
	// A simple background for our game
  //game.add.sprite(0, 0, 'sky');
  game.stage.backgroundColor = RGBtoHEX(230, 230, 230);

	circles = game.add.group();
	circles.enableBody = false;

	/*
	var addCircles = function(thex, they, sprite, r, g, b) {
		console.log("Hi");
		var numCircles = circles.length;
		var thisCircleId = numCircles + 1;
	}

	addCircle(120, 120, 'circleSunlitsea', 207, 240, 158);
	*/
	var topBorder = 120;
	var circleWidth = 160;
	var horizSpacing = 90;

	var circle1 = circles.create(circleWidth*0 + horizSpacing*0.5, topBorder, 'circle');
	circle1.tint = RGBtoHEX(207, 240, 158);

	var circle2 = circles.create(circleWidth*1 + horizSpacing*2, topBorder, 'circle');
	circle2.tint = RGBtoHEX(168, 219, 168);

	var circle3 = circles.create(circleWidth*2 + horizSpacing*3, topBorder, 'circle');
	circle3.tint = RGBtoHEX(121, 189, 154);

	var circle4 = circles.create(circleWidth*3 + horizSpacing*4, topBorder, 'circle');
	circle4.tint = RGBtoHEX(59, 134, 134);

	var circle5 = circles.create(circleWidth*4 + horizSpacing*5, topBorder, 'circle');
	circle5.tint = RGBtoHEX(207, 240, 158);

	var circle6 = circles.create(circleWidth*0 + horizSpacing*1, topBorder*4, 'circle');
	circle6.tint = RGBtoHEX(168, 219, 168);

	var circle7 = circles.create(circleWidth*1 + horizSpacing*2, topBorder*4, 'circle');
	circle7.tint = RGBtoHEX(121, 189, 154);

	var circle8 = circles.create(circleWidth*2 + horizSpacing*3, topBorder*4, 'circle');
	circle8.tint = RGBtoHEX(59, 134, 134);

	var circle9 = circles.create(circleWidth*3 + horizSpacing*4, topBorder*4, 'circle');
	circle9.tint = RGBtoHEX(59, 134, 134);

	// Do something to each and every circle
	for (var i=0; i < circles.children.length; i++) {
		var theScale = 1;
		circles.children[i].scale.setTo(theScale, theScale);
		circles.children[i].inputEnabled = true;
		circles.children[i].name = "circle" + i;
		circles.children[i].events.onInputDown.add(listener, {circleName: circles.children[i].name});
		//circles.children[i].
	}

	//text = game.add.text(100, 100, '', { fill: '#ffffff' });

}

function listener() {
	if (_socketEnabled) {
		socket.emit('my other event', { circleName: this.circleName });
	}
	console.log('Clicked ' + this.circleName);
}

function update() {
}

</script>

</body>
</html>
